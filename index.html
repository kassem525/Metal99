<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø­Ø§Ø³Ø¨Ø© ÙˆØ²Ù† Ù„ÙˆØ­ Ù…Ø¹Ø¯Ù†ÙŠ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="jspdf.umd.min.js"></script>
  <style>
    body {{
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: #f8f9fa;
      direction: rtl;
      padding: 20px;
    }}
    .calculator {{
      background: white;
      border-radius: 12px;
      padding: 20px;
      max-width: 400px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }}
    input, select, button {{
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      font-size: 16px;
    }}
    #savedResults div {{
      margin-bottom: 5px;
    }}
    button.small-btn {{
      font-size: 13px;
      padding: 3px 6px;
    }}
  </style>
</head>
<body>
  <div class="calculator">
    <h2>Ø­Ø§Ø³Ø¨Ø© ÙˆØ²Ù† Ù„ÙˆØ­ Ù…Ø¹Ø¯Ù†ÙŠ</h2>
    <label>Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…):</label><input type="number" id="length" />
    <label>Ø§Ù„Ø¹Ø±Ø¶ (Ø³Ù…):</label><input type="number" id="width" />
    <label>Ø§Ù„Ø³Ù…Ø§ÙƒØ© (Ø³Ù…):</label><input type="number" id="thickness" />
    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø¯Ù†:</label>
    <select id="material">
      <option value="7.85">Ø­Ø¯ÙŠØ¯</option>
      <option value="2.70">Ø£Ù„Ù…Ù†ÙŠÙˆÙ…</option>
      <option value="8.96">Ù†Ø­Ø§Ø³</option>
    </select>
    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø³Ø®:</label><input type="number" id="multiplyInput" />
    <button id="calculateBtn">Ø§Ø­Ø³Ø¨ Ø§Ù„ÙˆØ²Ù†</button>
    <h3 id="result">Ø§Ù„ÙˆØ²Ù†: ... ÙƒØ¬Ù…</h3>
    <button id="addResultBtn">â• Ø¥Ø¶Ø§ÙØ©</button>
    <div id="savedResults"></div>
    <h3 id="totalSum">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0.00 ÙƒØ¬Ù…</h3>
    <button id="exportPdfBtn">ğŸ“„ ØªØµØ¯ÙŠØ± PDF</button>
  </div>

  <script>
    let currentWeight = 0;
    let totalSum = 0;

    document.getElementById("calculateBtn").onclick = () => {{
      const length = parseFloat(document.getElementById('length').value);
      const width = parseFloat(document.getElementById('width').value);
      const thickness = parseFloat(document.getElementById('thickness').value);
      const density = parseFloat(document.getElementById('material').value);

      if (isNaN(length) || isNaN(width) || isNaN(thickness)) {{
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
        return;
      }}

      const volume = length * width * thickness;
      currentWeight = (volume * density) / 1000;
      const multiplier = parseFloat(document.getElementById('multiplyInput').value);
      const total = isNaN(multiplier) ? currentWeight : currentWeight * multiplier;
      document.getElementById("result").textContent = `Ø§Ù„ÙˆØ²Ù†: ${{total.toFixed(2)}} ÙƒØ¬Ù…`;
    }};

    document.getElementById("addResultBtn").onclick = () => {{
      const thickness = document.getElementById('thickness').value;
      const length = document.getElementById('length').value;
      const multiplier = document.getElementById('multiplyInput').value;
      const multiplied = (currentWeight * multiplier).toFixed(3);
      if (isNaN(multiplied) || multiplied <= 0) {{
        alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø© Ù„Ù„Ø¥Ø¶Ø§ÙØ©");
        return;
      }}
      const resultId = Date.now();
      const resultText = `Ø§Ù„Ø³Ù…Ø§ÙƒØ© ${{thickness}} Ã— Ø§Ù„Ø·ÙˆÙ„ ${{length}} Ã— Ø§Ù„Ø¹Ø¯Ø¯ ${{multiplier}} = ${{multiplied}} ÙƒØ¬Ù…`;
      const div = document.createElement("div");
      div.id = `result-${{resultId}}`;
      div.innerHTML = `<span>${{resultText}}</span> <button class='small-btn' onclick="removeResult(${{multiplied}}, 'result-${{resultId}}')">Ø­Ø°Ù</button>`;
      document.getElementById("savedResults").appendChild(div);
      totalSum += parseFloat(multiplied);
      document.getElementById("totalSum").textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${{totalSum.toFixed(3)}} ÙƒØ¬Ù…`;
    }};

    function removeResult(value, id) {{
      totalSum -= value;
      document.getElementById("totalSum").textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${{totalSum.toFixed(3)}} ÙƒØ¬Ù…`;
      const el = document.getElementById(id);
      if (el) el.remove();
    }}
  </script>
</body>
</html>